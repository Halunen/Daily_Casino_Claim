<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Task Runner</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 15px;
      width: 320px;
      background-color: #f9f9f9;
      color: #333;
    }

    h2, h3 {
      margin-top: 0;
      font-size: 1.1rem;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 10px;
    }

    select, button {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      font-size: 0.9rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }

    .section {
      margin-bottom: 15px;
    }

    #status, #debugLog {
      font-size: 0.85rem;
      background: #fff;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      max-height: 200px;
      overflow-y: auto;
    }

    /* Auto Mode status dot */
    #autoStatusContainer {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    #autoStatusDot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-left: 10px;
      background-color: red; /* default OFF */
    }

    /* Compact site info */
    .site-status {
      margin-bottom: 10px;
      padding-bottom: 6px;
      border-bottom: 1px solid #eee; /* subtle divider */
    }
    .site-header {
      font-weight: bold;
      font-size: 0.85rem;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }
    .site-meta {
      font-size: 0.75rem;
      color: #555;
      font-weight: normal;
      margin-left: 8px;
    }

    /* Logs */
    .site-log {
      margin-left: 16px;  /* indent under site header */
      margin-top: 2px;
      padding: 4px;
      border-radius: 4px;
      background: #fdfdfd;
      border: 1px solid #eee;
      max-height: 100px;
      overflow-y: auto;
      font-size: 0.75rem;
    }
    .site-log div { padding: 1px 0; }

    .site-nolog {
      font-size: 0.7rem;
      color: #999;
      font-style: italic;
      margin-left: 16px;  /* indent to match logs */
      margin-top: 2px;
    }

    /* Highlighted log lines */
    .log-success { color: green; font-weight: bold; }
    .log-error { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <h2>üéØ Task Runner</h2>

  <div class="section">
    <label for="siteSelector">Run a Site:</label>
    <select id="siteSelector"></select>
    <button id="runSelected">‚ñ∂ Run Selected Site</button>
    <button id="testLogger">üß™ Test Log Entry</button>
  </div>

  <div class="section" id="autoStatusContainer">
    <button id="toggleAuto">‚è≥ Loading...</button>
    <div id="autoStatusDot" title="Auto Mode is OFF"></div>
  </div>

  <div class="section">
    <h3>Status</h3>
    <div id="status">Loading...</div>
  </div>

  <div class="section">
    <button id="downloadLog">üì• Download Log</button>
    <button id="resetTimestamps">‚ôª Reset Timestamps</button>
  </div>

  <div class="section">
    <h3>Debug Log</h3>
    <div id="debugLog">(no logs)</div>
    <button id="clearDebugLog">üßπ Clear Debug Log</button>
  </div>

  <script src="popup.js"></script>
</body>
</html>
